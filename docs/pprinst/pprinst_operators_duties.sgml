<Sect1 id="operators-duties">
<Title>Operator's Duties for the PPR Spooler</Title>

<Para>
There are certain commands which can only be used by an operator.  The users
``root'' and ``ppr'' are operators.  Any user whose name appears in the file
<Literal remap="tt">/etc/ppr/acl/ppop.allow</Literal> is an operator too.
</Para>

<Sect2>
<Title>Deleting Jobs</Title>

<Para>
An operator has at his disposal an additional command for deleting jobs:
</Para>

<Para>

<Screen>
$ ppop purge chipmunk
</Screen>

</Para>

<Para>
This command will delete all jobs queue for the printer ``chipmunk'' no matter
to whom they belong.
</Para>

</Sect2>

<Sect2>
<Title>Mounting Media</Title>

<Para>
If you have defined bins for a printer, before you can print on it you must
indicate to PPR what kind of paper is in each bin.  To see what kinds of paper
(media) are mounted on a printer, use use the <Emphasis remap="bf">ppop media</Emphasis> command:
</Para>

<Para>

<Screen>
# ppop media mrhp3si
Printer    Bin        Media
---------------------------------------------------------------
mrhp3si    Upper      letter
	   Lower      letter
	   Envelope   com10
</Screen>

</Para>

<Para>
To mount a different medium, use the <Emphasis remap="bf">ppop mount</Emphasis> command:
</Para>

<Para>

<Screen>
# ppop mount mrhp3si Upper 3hole
</Screen>

</Para>

<Para>
You view the current contents of the list of known media types by issuing
the command <Emphasis remap="bf">ppad media show all</Emphasis>.
</Para>

</Sect2>

<Sect2>
<Title>Stopping and Starting Printers</Title>

<Para>
You can determine a printer's status with the <Emphasis remap="bf">ppop status</Emphasis> command:
</Para>

<Para>

<Screen>
# ppop status mrhp3si
Printer       Status
------------------------------------------------------------
mrhp3si       idle
</Screen>

</Para>

<Para>
We see that the printer is ``idle''.  This means it is not printing right
now but it is willing to begin printing.  When it is printing, the name of
the job it is printing is indicated:
</Para>

<Para>

<Screen>
# ppop status mrhp3si
Printer       Status
------------------------------------------------------------
mrhp3si       printing mrhp3si-3876
</Screen>

</Para>

<Para>
A printer is stopped with the <Emphasis remap="bf">ppop stop</Emphasis> command:
</Para>

<Para>

<Screen>
# ppop stop mrhp3si
</Screen>

</Para>

<Para>
If the printer was idle, it is stopped immediately:
</Para>

<Para>

<Screen>
# ppop status mrhp3si
Printer       Status
------------------------------------------------------------
mrhp3si       idle
# ppop stop mrhp3si
# ppop status mrhp3si
Printer       Status
------------------------------------------------------------
mrhp3si       stopt
</Screen>

</Para>

<Para>
If the printer is in the middle of a job, it will be stopped when the job is
done.  Until it stops, <Emphasis remap="bf">ppop status</Emphasis> continues to display the name of the
job being printed, but it also indicates that the printer is stopping:
</Para>

<Para>

<Screen>
# ppop status mrhp3si
Printer       Status
------------------------------------------------------------
mrhp3si       printing mrhp3si-3876
# ppop stop mrhp3si
# ppop status mrhp3si
Printer       Status
------------------------------------------------------------
mrhp3si       printing mrhp3si-3876 (stopping)
</Screen>

</Para>

<Para>
If you want to force a printer to stop immediately, you must use the <Emphasis remap="bf">ppop
halt</Emphasis> command:
</Para>

<Para>

<Screen>
# ppop halt mrhp3si
</Screen>

</Para>

<Para>
If the printer was printing a job, it stops in the middle of the job and the
job is returned to the queue.  If the job was submitted to a group of
printers, it will be printed on the next member of the group to become idle.
This means that the job may begin printing on another printer the moment you
halt the printer on which it was origionally printing.
</Para>

<Para>
If a printer is stopt or stopping, you can start it again with the <Emphasis remap="bf">ppop start</Emphasis>
command:
</Para>

<Para>

<Screen>
# ppop start mrhp3si
</Screen>

</Para>

<Para>
The <Emphasis remap="bf">ppop start</Emphasis> command can also be used when a printer is not printing due to a
fault.  In that case, the <Emphasis remap="bf">ppop start</Emphasis> command will cause an immediate retry.
Printer faults are discussed in section <XRef LinkEnd="printerfaults">.
</Para>

</Sect2>

<Sect2>
<Title>More On Mounting Media</Title>

<Para>
The information in this section only applies if you have set the printer up
for media management as described in section <XRef LinkEnd="adding-autobin">.
</Para>

<Para>
Each job which enters the print queue requires one or more types of paper.
Most jobs require only one.  If the required medium is not mounted, <Emphasis remap="bf">ppop
list</Emphasis> will indicate the types of media (generally various kinds of paper)
that the job requires.  Here is an example:
</Para>

<Para>

<Screen>
$ ppop list chipmunk
Queue ID         For               Time    Pgs Status
------------------------------------------------------------------
chipmunk-2353    chappell          02:59PM 034 printing on chipmunk
					       67%, page 29
chipmunk-2354    chappell          03:09PM 031 waiting for printer
chipmunk-2357    chappell          03:09PM 302 waiting for media
					       letterhead
</Screen>

</Para>

<Para>
The safest way to change media is to stop the printer first.  Obviously, it
is best not to remove a paper tray until the printer has stopped.  For this
reason, the <Emphasis remap="bf">ppop wstop</Emphasis> command is provided.  This command stops the
printer as soon as the current job is completed.  The important point is that
<Emphasis remap="bf">ppop wstop</Emphasis> does not exit until the printer has stopped. That means
you can make a shell script like this one:
</Para>

<Para>

<Screen>
#!/bin/sh
# Mount letterhead in chipmunk's upper bin.
echo "Please wait while the printer stops..."
ppop wstop chipmunk
echo "Please put letterhead in chipmunk's upper bin."
echo "Press RETURN when you have done so."
read response
ppop mount chipmunk Upper letterhead
ppop start chipmunk
echo "Thank you."
</Screen>

</Para>

</Sect2>

<Sect2 id="printerfaults">
<Title>Dealing With Printer Faults
</Title>

<Para>
After most printer faults, PPR will try again soon.  You can use <Emphasis remap="bf">ppop
status printer</Emphasis> to check on the status of a printer:
</Para>

<Para>

<Screen>
# ppop status chipmunk
Printer       Status
------------------------------------------------------------
chipmunk      fault, retry 5 in 70 seconds
</Screen>

</Para>

<Para>
You may ask PPR to try a printer again immediately with the <Emphasis remap="bf">ppop
start</Emphasis> command:
</Para>

<Para>

<Screen>
# ppop start chipmunk
</Screen>

</Para>

<Para>
Each time a printer fault occurs a message is appended to the printer's alerts
file.  (If the previous fault occured more than one hour before, the alerts
file is cleared first.)  You may view a printer's alerts file at any time
in this manner:
</Para>

<Para>

<Screen>
# ppop alerts chipmunk
Subject: Faults on "chipmunk"

Fri Feb 18 11:02:18 1994
"Mac Laser Printer:LaserWriter@MCEC" not found.
Printer placed in auto-retry mode.

Fri Feb 18 11:02:56 1994
"Mac Laser Printer:LaserWriter@MCEC" not found.
Printer placed in auto-retry mode.
</Screen>

</Para>

<Para>
If chipmunk is a new printer, the problem may be that the printer was given a
name which ends with a space.  If this is the case, PPR will not find it
since it is looking for the printer without a space.  We can either rename
the printer, removing the space, or we can tell PPR to look for it with a
space.  Here is the command to do the latter:
</Para>

<Para>

<Screen>
# ppad interface chipmunk atalk "Mac Laser Printer :LaserWriter@MCEC"
# ppad start chipmunk
</Screen>

</Para>

</Sect2>

<Sect2>
<Title>Holding and Releasing Jobs</Title>

<Para>
If a job is in the queue but has not ues begun to print, it is possible
to place it in the ``held'' state.  You do this with the <Emphasis remap="bf">ppop hold</Emphasis>
command, like this:
</Para>

<Para>

<Screen>
# ppop hold chipmunk-2532
</Screen>

</Para>

<Para>
While it is held, a job will remain in the queue but it will not be
printed.  The ``Status'' field in the <Emphasis remap="bf">ppop list</Emphasis> output will say
``held''.  When you are ready to have it printed, you must use the command
<Emphasis remap="bf">ppop release</Emphasis>, like this:
</Para>

<Para>

<Screen>
# ppop release chipmunk-2532
</Screen>

</Para>

</Sect2>

<Sect2>
<Title>PostScript Errors and Arrested Jobs</Title>

<Para>
If the printer reports a PostScript error while the job is printing, PPR
will finish transmitting the job but when it is done and would
normally delete the job from the queue, it instead places the job in a special
held state called ``arrested''.  The defective job is preserved so that an
attempt may be made to discover the cause of the PostScript error.  For
example, the following queue listing shows two arrested jobs:
</Para>

<Para>

<Screen>
Queue ID     For                 Time    Pgs Status
----------------------------------------------------------------------------
rat-2717     jandrews            12:10PM 001 arrested
					     (PostScript error)
rat-2718     Abraham Adams       12:10PM 007 printing on rat
					     14%, page 1
adshp4m-2719 jones               12:11PM 005 arrested
					     (PostScript error)
</Screen>

</Para>

<Para>
You may view the error message, along with any other output the
print job returned over the interface, by using the <Emphasis remap="bf">ppop log</Emphasis>
command.  For instance, if the job ``adshp4m-2719'' is arrested, you can
view the log like this:
</Para>

<Para>

<Screen>
# ppop log adshp4m-2719
%%[ Error: syntaxerror; OffendingCommand: --nostringval-- ]%%
%%[ Flushing: rest of job (to end-of-file) will be ignored ]%%
</Screen>

</Para>

<Para>
In this case, the PostScript code was probably generated incorrectly, so all
you can do is cancel the job.  If you think it might print on another
printer, you can use the <Emphasis remap="bf">ppop move</Emphasis> command to move it to another
print queue and then use the <Emphasis remap="bf">ppop release</Emphasis> command to take it out of
the arrested state, like this:
</Para>

<Para>

<Screen>
# ppop move adshp4m-2719 mylaser
# ppop release mylaser-2719
</Screen>

</Para>

<Para>
Notice that moving the job changed its name, so we had to use the new name
in the second command.  While an arrested job can be deleted just like any
other job, the administrators have a special command just for that purpose:
</Para>

<Para>

<Screen>
# ppop clean rat adshp4m
2 jobs were canceled.
</Screen>

</Para>

<Para>
The command above will delete all arrested jobs in the queues ``rat'' and
``adshp4m''.  If we imagine that the command above acted on the jobs shown
in the queue listing at the start of this section, then it deleted the jobs
``adshp4m-2719'' and ``rat-2717'' but left the job ``rat-2718''.  The
<Emphasis remap="bf">ppop clean</Emphasis> command will only delete arrested jobs.
</Para>

<Para>
We can also could have deleted all arrested jobs in the system:
</Para>

<Para>

<Screen>
# ppop clean all
2 jobs were canceled
</Screen>

</Para>

<Para>
If the printer does not have an interface which supports two way
communication, then PostScript errors will not be detected.  The interface
<Emphasis remap="bf">atalk</Emphasis> is one that supports two way communication, the interface <Emphasis remap="bf">simple</Emphasis>
is one that does not.
</Para>

</Sect2>

</Sect1>

