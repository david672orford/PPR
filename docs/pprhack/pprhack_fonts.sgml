<Sect1>
<Title>Fonts</Title>

<Sect2 id="fontsub">
<Title>Font Substitution Configuration File</Title>

<Para>
This file resides in the directory <Filename class="Directory">/usr/lib/ppr/lib/</Filename>.  It is
replaced whenever a new version of PPR is installed, so if you modify
it you should keep a copy of your modifications elsewhere.
</Para>

<Para>
The file contains a list of PostScript font names and possible substitute
fonts.
</Para>

<Para>
Any line that has <Literal>#</Literal> or <Literal>;</Literal> in the first column is a comment.
Blank lines are ignored.  A font substitution record begins with the name of
the font for which there are substitutes.  The name should start in column
one and be on a line by
itself.  The list of possible substitutes follows, one per line.  Each
substitute font line should start with a space or tab.  You may list as many
substitute fonts as you like.  The first substitute font to be found in the
printer's PPD file, in the cache directories or in the index created with
<Command>ppr-indexfonts</Command> will be used.
</Para>

<Para>
Here is an example of four records which indicate that the IBM Courier fonts are
suitable substitutes for the Adobe Courier fonts:
</Para>

<Para>

<Screen>
Courier
	IBMCourier
Courier-Bold
	IBMCourier-Bold
Courier-Oblique
	IBMCourier-Italic
Courier-BoldOblique
	IBMCourier-BoldItalic
</Screen>

</Para>

<Para>
You have the option of specifying a PostScript transform matrix to be applied to
the substitute font.  Generally this will be used to adjust the width.  The
should appear on the substitute font line, after the substitute font name.  Here
is an example:
</Para>

<Para>

<Screen>
Helvetica-Condensed
	Helvetica [0.80 0 0 1 0 0]
Helvetica-Condensed-Bold
	Helvetica-Bold [0.80 0 0 1 0 0]
Helvetica-Condensed-Oblique
	Helvetica-Oblique [0.80 0 0 1 0 0]
Helvetica-Condensed-BoldOblique
	Helvetica-BoldOblique [0.80 0 0 1 0 0]
</Screen>

</Para>

<Para>
This approximates Helvetica Condensed by scaling Helvetica to 80% of
its normal width.  The role of the other members of the matrix, refer to the
PostScript language reference manual.
</Para>

</Sect2>

<Sect2>
<Title><Application>MetaFont</Application> Modes Configuration File</Title>

<Para>
This file <Filename>mfmodes.conf</Filename> is used by <Command>ppad</Command> when setting the default
filter options.  Specifically, the <Option>mfmode=</Option> option is selected with the
aid of this file.  The <Option>mfmode=</Option> option is used by the
DVI filter to select an appropriate <Application>MetaFont</Application> mode for a given printer.
</Para>

<Para>
Before consulting this file, <Command>ppad</Command> reads the printer's PPD file and extracts
the values from the following lines:
</Para>

<Para>

<Screen>
*Product:
*ModelName:
*NickName:
*DefaultResolution:
</Screen>

</Para>

<Para>
The extracted values are then compared to values on lines in the <Filename>mfmodes.conf</Filename>
file.  Each line in the <Filename>mfmodes.conf</Filename> file has the following format:
</Para>

<Para>

<Screen>
<Replaceable>product</Replaceable>:<Replaceable>modelname</Replaceable>:<Replaceable>nickname</Replaceable>:<Replaceable>resolution</Replaceable>:<Replaceable>mfmode</Replaceable>
</Screen>

</Para>

<Para>
The file is read top to bottom until a match is found or the end is reached.
The information from the PPD file is compared to the first four fields of each
line.  A <Literal>*</Literal> may be used as a wildcard in any or all of the first four fields.
When a match is found, the value from the fifth field is used as the value for
the default filter option <Emphasis remap="bf">mfmode=</Emphasis>.
</Para>

<Sect3>
<Title>Identification by Product</Title>

<Para>
The <Literal>*Product:</Literal> line from the PPD file generally identifies the manufacturer and
model line of which the printer is a part.  Since all printers which use one
product string generally use the same print mechanism, this parameter alone is
usually enough to make selection of the correct MetaFont mode possible.  For
this reason, most entries in the <Filename>mfmodes.conf</Filename> file will have the <Replaceable>product</Replaceable>
field filled in but the <Replaceable>modelname</Replaceable>, <Replaceable>nickname</Replaceable>, and <Replaceable>resolution</Replaceable> fields will
all be <Literal>*</Literal>.
</Para>

<Para>
For example, the following line:
</Para>

<Para>

<Screen>
LaserJet 4:*:*:*:ljfour
</Screen>

</Para>

<Para>
will match if the <Literal>*Product:</Literal> line from the PPD file has a value of
<Literal>(LaserJet 4)</Literal>.  The fact that fields two through four contain astrisks indicates that any
value is acceptable for product, modelname, and resolution.
</Para>

</Sect3>

<Sect3>
<Title>Identification by ModelName</Title>

<Para>
The GhostScript interpreter has a product string of <Literal>Ghostscript</Literal>
or <Literal>Alladin GhostScript</Literal>.  Therefor, the printer must be identified by means of its PPD
files <Literal>*ModelName:</Literal> line.  Here are some reasonable configuration lines for
printers driven by Ghostscript:
</Para>

<Para>

<Screen>
*:Dot Matrix 24 pin Ghostscript:*:*:NEChi
*:HP LaserJet III Ghostscript:*:*:CanonCX
*:HP DeskJet 500 Ghostscript:*:*:HPDeskJet
</Screen>

</Para>

</Sect3>

<Sect3>
<Title>Identification by NickName</Title>

<Para>
In a PPD file obtained from Adobe or the printer's manufacture,
the <Literal>*NickName:</Literal> line is identical to the <Literal>*ModelName:</Literal> line.
You might change it if you make a special hacked-up copy of
the PPD file for a particular printer.  For example, you might change it to
<Literal>David's HP DeskJet 500 Ghostscript</Literal>.
</Para>

<Para>
There are valid reasons for using a modified PPD file, but why changes to the
PPD file should dictate a different MetaFont mode is hard to say.  (Changes to
the <Literal>*DefaultResolution:</Literal> line are covered by the next section.)  Unless you
know a good reason not to, you should always put a "*" in this field.
</Para>

</Sect3>

<Sect3>
<Title>Identification by Resolution</Title>

<Para>
Generally, you can just put <Literal>*</Literal> in the <Replaceable>resolution</Replaceable> field.  There
are however two possible reasons for filling in the value from the PPD file's
<Literal>*DefaultResolution:</Literal> line.
</Para>

<Para>
One is if the printer's resolution can be changed.  A change in resolution
requires a change in the MetaFont mode.  You might have several different PPD
files for the same make and model of printer, one for each resolution.  Here is
a (fictitous) example:
</Para>

<Para>

<Screen>
*:HP LaserJet III Ghostscript:*:300dpi:CanonCX
*:HP LaserJet III Ghostscript 150DPI:*:150dpi:ljlo
</Screen>

</Para>

<Para>
The other reason for putting a value other than <Literal>*</Literal> in the
<Replaceable>resolution</Replaceable> field
is if the line is one at the end of the file which is intened to to be a best
guess for printers which have not matched any of the lines above.  These are
some reasonable last resort lines:
</Para>

<Para>

<Screen>
*:*:*:300dpi:CanonCX
*:*:*:600dpi:ljfour
*:*:*:360dpi:NEChi
</Screen>

</Para>

</Sect3>

<Sect3>
<Title>Selecting MetaFont Mode Names</Title>

<Para>
The MetaFont mode names in the <Filename>mfmodes.conf</Filename> file that comes with PPR are
taken from the <Filename>modes.mf</Filename> file maintained by Karl Berry.  A recent version
of his <Filename>modes.mf</Filename> file is distributed with the PPR source code, in the
<Filename>misc</Filename> directory.  His file defines a number of aliases for each mode.  When
adding entries to PPR's <Filename>mfmodes.conf</Filename> file you should try not to use two
different names that both refer to the same mode in <Filename>modes.mf</Filename> because that
would result in the generation of duplicate sets of identical pk font files.
The <Filename>mfmodes.conf</Filename> file supplied with PPR always uses the first alias from
Karl Berry's <Filename>modes.mf</Filename> file which may be abtained from
<Emphasis remap="bf">ftp://ftp.tug.org/tex/modes.mf</Emphasis>.
</Para>

</Sect3>

</Sect2>

</Sect1>

