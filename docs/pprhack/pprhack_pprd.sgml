<Sect1>
<Title>Protocol for Comunicating with <Command>pprd</Command></Title>

<Para>
This section describes the protocol which use commands such as <Command>ppr</Command>,
<Command>ppop</Command>, and <Command>ppad</Command> use to communicate with <Command>pprd</Command> and <Command>rpprd</Command>.
This information may assist those attempting to understand the source code.
</Para>

<Para>
The main printing daemon, <Command>pprd</Command> receives commands over a named pipe and
acts on them.  The program <Command>ppr</Command> uses one such command it sends to <Command>pprd</Command>
to tell it that a new jobs has been placed in the queue directories.  The
program <Command>ppad</Command> has two such commands which it uses to inform <Command>pprd</Command> that
a printer or group configuration file has been modified.  Finally, <Command>ppop</Command>
has many commands which it uses to control <Command>pprd</Command> or to request information
from it.
</Para>

<Sect2>
<Title>Accepting Jobs</Title>

<Para>
Once the job submission program <Command>ppr</Command> has created the queue files it
sends a command to <Command>pprd</Command> or <Command>rpprd</Command> telling it that the job is there and
is ready for printing or transfer to the remote system.  This command takes the
form:
</Para>

<Para>
j <Replaceable>destination&lowbar;node destination&lowbar;queue id subid home&lowbar;node initial&lowbar;priority</Replaceable>
</Para>

<Para>
The <Replaceable>destination&lowbar;node</Replaceable> is the node to which the job should be sent.  If the
command is written to <Command>pprd</Command>'s named pipe, this field must contain the node
name of the local system.  The <Replaceable>destination&lowbar;queue</Replaceable> is the name of the print
queue on the destination node.  The <Replaceable>id</Replaceable> and <Replaceable>subid</Replaceable> are the queue id and
the job fragment number respectively.  The <Replaceable>subid</Replaceable> will most often be zero.
The <Replaceable>home&lowbar;node</Replaceable> is the node name of the system on which the job origionated.
</Para>

</Sect2>

<Sect2>
<Title>Re-loading Configuration Files</Title>

<Para>
Whenever a printer or group configuration files is modified or a new one
created, <Command>pprd</Command> must be directed to read it.  To inform <Command>pprd</Command> that it
must read a new or revised printer configuration file, a command line of this
form is sent:
</Para>

<Para>

<Screen>
NP <Replaceable>printername</Replaceable>
</Screen>

</Para>

<Para>
To indicate that a group configuration file
must be re-read or that a new group configuration file must be read for the
first time:
</Para>

<Para>

<Screen>
NG <Replaceable>groupname</Replaceable>
</Screen>

</Para>

<Para>
There will be no acknowledgement of either command.
</Para>

</Sect2>

<Sect2>
<Title>Yielding Information to <Command>ppop</Command></Title>

<Para>
The utility <Command>ppop</Command> must communicate with <Command>pprd</Command> and <Command>rpprd</Command> in
order to list the queue, show the status of printers, mount forms, and do other
tasks.  As work on <Command>rpprd</Command> continue, descriptions of the necessary commands
will be added to this document.
</Para>

</Sect2>

</Sect1>
