<Sect1>
<Title>Directories and Files</Title>

<Para>
This section describes the directory structure found within PPR's home
directory (<Literal remap="tt">/usr/ppr</Literal>), in its spooling directory,
(<Literal remap="tt">/var/spool/ppr</Literal>) and in its configuration directory
(<Literal remap="tt">/etc/ppr</Literal>).
</Para>

<Sect2>
<Title>The <Literal remap="tt">/var/spool/ppr/queue</Literal> Directory</Title>

<Para>
The <Literal remap="tt">/var/spool/ppr/queue</Literal> directory contains one file for each print
job currently in the queue.  Each file name is the same as the queue id of the
job is describes.  These files are created by the program <Emphasis remap="bf">ppr</Emphasis> and removed
by the print daemon <Emphasis remap="bf">pprd</Emphasis> when the job has been printed or is canceled.
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/var/spool/ppr/jobs</Literal> Directory</Title>

<Para>
The <Literal remap="tt">/var/spool/ppr/jobs</Literal> directory contains three to five files for
each job currently in the queue.
</Para>

<Para>
The first part of each file name is the queue id of the job.  The file whose
name ends in ``<Literal remap="tt">-comments</Literal>'' contains any header and trailer comment lines
which have not been removed and represented by parameters in the file in the
queue directory.
</Para>

<Para>
The file whose name ends in ``<Literal remap="tt">-pages</Literal>'' contains the text of the document
default section, if it exists, and a list of the pages in the document.  The
record for each page includes the offset in the ``<Literal remap="tt">-text</Literal>'' file at which it
begins and any page header and trailer comments for that page.
</Para>

<Para>
The file whose name ends in ``<Literal remap="tt">-text</Literal>'' contains most of the text of the
job.  If the <Emphasis remap="bf">-S true</Emphasis> switch was used when <Emphasis remap="bf">ppr</Emphasis> was invoked, then
resources will be missing from this file, having been stript out and replaced
by comments which will later be used to put them back.
</Para>

<Para>
The files with names ending in ``<Literal remap="tt">-log</Literal>'' contain the print job logs.  If
<Emphasis remap="bf">ppr</Emphasis> was invoked with the <Emphasis remap="bf">-w log</Emphasis> switch then any warnings will be in
this file.  Any text received from the printer, including printer error
messages, will also be in this file.  Messages which explain why the job was
routed away from a particular printer will be in this file, but each line of
such messages will begin with a "+".  Whenever a banner or trailer page is
printed, the contents of the log file  is printed and the log file is deleted.
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/var/spool/ppr/printers/alerts</Literal> Directory</Title>

<Para>
Each time a fault message is generated for a printer, it is appended to a
file in this directory.  There is one file for each printer.  If the file is
more than one hour old, the file is truncated to zero length before writing the
new alert instead of appending.  This ensures that only recent messages will be
sent to the operator.
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/var/spool/ppr/printers/status</Literal> Directory</Title>

<Para>
This file may contain one file for each printer.  If present, the file
contains the last status message received from the printer.
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/var/spool/ppr/logs</Literal> Directory</Title>

<Para>
This directory contains log files.  Error messages may be written in these
log files when PPR component fail.  If this directory contains the file
<Literal remap="tt">printlog</Literal>, PPR will append a line for each file printed.  (See Appendix
<XRef LinkEnd="printlog">.)
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/etc/ppr</Literal> Directory</Title>

<Para>
This directory contains a number of configuration files.  In also contains
subdirectories which will be described in later sections.
</Para>

<Para>
The file <Literal remap="tt">papsrv.conf</Literal> is descibed in the papsrv.conf(5) man page.
</Para>

<Para>
The purpose of <Literal remap="tt">newprn.conf</Literal> is explained in Appendix <XRef LinkEnd="printer-config">.
</Para>

<Para>
The file <Literal remap="tt">smb-include.conf</Literal> is a segment of Samba configuration file.  It
is generated by the program <Emphasis remap="bf">ppr2samba</Emphasis>.  The file <Literal remap="tt">printcap</Literal> is also
generated by <Emphasis remap="bf">ppr2samba</Emphasis> but it is obsolete and will be eliminated in a
future release of PPR.
</Para>

<Para>
The file <Literal remap="tt">charge&lowbar;users.db</Literal> is the user charge accounts database.  The
program <Emphasis remap="bf">ppuser</Emphasis> can be used to read and modify this file.
</Para>

<Para>
The documentation for the file <Literal remap="tt">lw-messages.conf</Literal> can be found in
<Literal remap="tt">lw-messages.conf.sample</Literal>.
</Para>

<Para>
The file <Literal remap="tt">media.db</Literal> is the list of known media
types.  It is consulted
by <COMMAND>ppr</COMMAND> and <COMMAND>pprdrv</COMMAND>.  It may be read
and modified by the
<command>ppad media</COMMAND> series of commands.
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/etc/ppr/printers</Literal> Directory</Title>

<Para>
There is one file in this directory for each printer.  Each file has the
same name as the printer it describes.  The format of one of these files is
described in Appendix <XRef LinkEnd="printer-config">.
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/etc/ppr/groups</Literal> Directory</Title>

<Para>
There is one file in this directory for each group.  Each file has the same
name as the group it describes.  The format of these files is described in
Appendix <XRef LinkEnd="group-config">.
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/etc/ppr/mounted</Literal> Directory</Title>

<Para>
This directory contains one file for each printer.  Each file contains a
list of a printer's bins and the medium mounted on each bin.  This file is
created by the main print daemon <Emphasis remap="bf">pprd</Emphasis>.  When <Emphasis remap="bf">pprd</Emphasis> starts up it looks
in this directory to determine what media was mounted last time it was
running.  It automatically re-mounts all those media.
</Para>

<Para>
The program <Emphasis remap="bf">pprdrv</Emphasis> also uses this file in order to select bins for
printing banner pages and to automatically select bins for print jobs according
to their required media.
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/interfaces</Literal> Directory</Title>

<Para>
Each file in this directory is a program which is responsible for making
contact with any printer which has a particular kind of interface.  For
instance, <Literal remap="tt">interfaces/atalk</Literal> is used to communicate with printers
connected through Apple's Printer Access Protocol.  The requirements imposed on
such an interface program are described in Appendix <XRef LinkEnd="interfaces2">.
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/responders</Literal> Directory</Title>

<Para>
Each file in the <Literal remap="tt">responders</Literal> directory is a program which can be used to
attempt to send a message to the user who submitted the job.  A responder
program is selected at the time the user invokes <Emphasis remap="bf">ppr</Emphasis>, by using the <Emphasis remap="bf">-m</Emphasis>
switch.  The parameter for the <Emphasis remap="bf">-m</Emphasis> switch is the name of the program in the
<Literal remap="tt">responders</Literal> directory which should be used.  If the <Emphasis remap="bf">-m</Emphasis> switch is not
used, the default responder, <Emphasis remap="bf">write</Emphasis>, is used.  (You can change the default
by setting the environment variable PPR&lowbar;RESPONDER.)  The manner in which a
responder is invoked is described in Appendix <XRef LinkEnd="responders">.
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/filters</Literal> Directory</Title>
<para>[This section hasn't been written yet.[</para>
</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/commentators</Literal> Directory</Title>
<para>[This section hasn't been written yet.[</para>
</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/fonts</Literal> Directory</Title>
<para>[This section hasn't been written yet.[</para>
</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/man</Literal> Directory</Title>
<para>[This section hasn't been written yet.[</para>
</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/cgi-bin</Literal> Directory</Title>
<para>[This section hasn't been written yet.[</para>
</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/www</Literal> Directory</Title>
<para>[This section hasn't been written yet.[</para>
</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/cache</Literal> Directory</Title>
<para>[This section hasn't been written yet.[</para>
</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/install</Literal> Directory</Title>
<para>[This section hasn't been written yet.[</para>
</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/locale</Literal> Directory</Title>
<para>[This section hasn't been written yet.[</para>
</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/speach</Literal> Directory</Title>
<para>[This section hasn't been written yet.[</para>
</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/bin</Literal> Directory</Title>

<Para>
This directory contains
the program <command>ppr</command> which submits jobs,
various utility programs such as <command>ppop</command> and <command>ppad</command>,
the PPR daemons <command>pprd</command>,
and the <command>papsrv</command>.
</Para>

</Sect2>

<Sect2>
<Title>The <Literal remap="tt">/usr/ppr/lib</Literal> Directory</Title>

<Para>
This directory contains <command>pprdrv</command> and as well as other
programs a user
or administrator wouldn't normally execute directly.  It also contains
some configuration files which even a system administrator wouldn't
ordinarily modify.  These files would be modified by people who are creating
new components for PPR.
</Para>

<Para>
The documenation for the file file <filename>lw-messages.conf</filename> is
in the file itself.
</Para>

<Para>
The file <filename>mfmodes.conf</filename> is used by <command>ppad</command>
when determining the default filter options for a printer or group.  The
format of this file is described in Section <XRef LinkEnd="dvi">.
</Para>

<Para>
The file <filename>fontsub.conf</filename> is used to find substitutes for
missing fonts.  It is described in <XRef LinkEnd="fontsub">.
</Para>

</Sect2>

<Sect2>
<Title>The <filename>/usr/share/ppr/PPDFiles</filename> Directory</Title>

<Para>
This is the default location for PPD files.  It contains a collection of PPD
files for common printers.  Most of these were provided by the manufacturers or
Adobe

<FOOTNOTE>
<Para>
Adobe makes a large collection of PPD files available by anonymouse
FTP.  See ftp://ftp.adobe.com/pub/adobe/ to find their latest PPD file
library.
</Para>
</FOOTNOTE>

but a few are part of PPR.
</Para>

</Sect2>

</Sect1>

